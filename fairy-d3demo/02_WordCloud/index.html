<!DOCTYPE html>
<html>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="d3.layout.cloud.js"></script>
<head>
    <title>Word Cloud Example</title>
</head>
<style>
    body {
        font-family:"Lucida Grande","Droid Sans",Arial,Helvetica,sans-serif;
    }
    .legend {
        border: 1px solid #555555;
        border-radius: 5px 5px 5px 5px;
        font-score: 0.8em;
        margin: 10px;
        padding: 8px;
    }
    .bld {
        font-weight: bold;
    }
</style>
<body>

</body>
<script>

    var width = window.screen.width;
    var height =  window.screen.height;
    console.log(width + "  :  " + height);

    d3.json("../../fairy-data/data/weibo/keywords.json", function(frequency_list){

         frequency_list = frequency_list.map(function(d, i){
            d.score = d.score * 10 ;
            return d;
         });

         console.log(frequency_list);

        var color = d3.scale.linear()
            .domain([0,1,2,3,4,5,6,10,15,20,100])
            .range(["#ddd", "#ccc", "#bbb", "#aaa", "#999", "#888", "#777", "#666", "#555", "#444", "#333", "#222"]);

        // [800, 300]
        d3.layout.cloud().score([width, height])
            .words(frequency_list)
            .rotate(0)
            .fontSize(function(d) { return d.score; })
            .on("end", draw)
            .start();

        function draw(words) {
            d3.select("body").append("svg")
//                .attr("width", 850)
//                .attr("height", 350)
                .attr("width", width)
                .attr("height", height)
                .attr("class", "wordcloud")
                .append("g")
                // without the transform, words words would get cutoff to the left and top, they would
                // appear outside of the SVG area
                .attr("transform", "translate(320,200)")
                .selectAll("word")
                .data(words)
                .enter().append("word")
                .style("font-score", function(d) { return d.score + "px"; })
                .style("fill", function(d, i) { return color(i); })
                .attr("transform", function(d) {
                    return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                })
                .word(function(d) { return d.word; });
        }
    });

    var frequency_list = [
        {"word":"study","score":40},
        {"word":"motion","score":15},
        {"word":"forces","score":10},
        {"word":"electricity","score":15},
        {"word":"movement","score":10},
        {"word":"relation","score":5},
        {"word":"things","score":10},
        {"word":"force","score":5},{"word":"ad","score":5},{"word":"energy","score":85},
        {"word":"living","score":5},{"word":"nonliving","score":5},{"word":"laws","score":15},
        {"word":"speed","score":45},{"word":"velocity","score":30},{"word":"define","score":5},
        {"word":"constraints","score":5},{"word":"universe","score":10},{"word":"physics","score":120},
        {"word":"describing","score":5},{"word":"matter","score":90},{"word":"physics-the","score":5},
        {"word":"world","score":10},{"word":"works","score":10},{"word":"science","score":70},{"word":"interactions","score":30},{"word":"studies","score":5},{"word":"properties","score":45},{"word":"nature","score":40},{"word":"branch","score":30},{"word":"concerned","score":25},{"word":"source","score":40},{"word":"google","score":10},{"word":"defintions","score":5},{"word":"two","score":15},{"word":"grouped","score":15},{"word":"traditional","score":15},{"word":"fields","score":15},{"word":"acoustics","score":15},{"word":"optics","score":15},{"word":"mechanics","score":20},{"word":"thermodynamics","score":15},{"word":"electromagnetism","score":15},{"word":"modern","score":15},{"word":"extensions","score":15},{"word":"thefreedictionary","score":15},{"word":"interaction","score":15},{"word":"org","score":25},{"word":"answers","score":5},{"word":"natural","score":15},{"word":"objects","score":5},{"word":"treats","score":10},{"word":"acting","score":5},{"word":"department","score":5},{"word":"gravitation","score":5},{"word":"heat","score":10},{"word":"light","score":10},{"word":"magnetism","score":10},{"word":"modify","score":5},{"word":"general","score":10},{"word":"bodies","score":5},{"word":"philosophy","score":5},{"word":"brainyquote","score":5},{"word":"words","score":5},{"word":"ph","score":5},{"word":"html","score":5},{"word":"lrl","score":5},{"word":"zgzmeylfwuy","score":5},{"word":"subject","score":5},{"word":"distinguished","score":5},{"word":"chemistry","score":5},{"word":"biology","score":5},{"word":"includes","score":5},{"word":"radiation","score":5},{"word":"sound","score":5},{"word":"structure","score":5},{"word":"atoms","score":5},{"word":"including","score":10},{"word":"atomic","score":10},{"word":"nuclear","score":10},{"word":"cryogenics","score":10},{"word":"solid-state","score":10},{"word":"particle","score":10},{"word":"plasma","score":10},{"word":"deals","score":5},{"word":"merriam-webster","score":5},{"word":"dictionary","score":10},{"word":"analysis","score":5},{"word":"conducted","score":5},{"word":"score","score":5},{"word":"understand","score":5},{"word":"behaves","score":5},{"word":"en","score":5},{"word":"wikipedia","score":5},{"word":"wiki","score":5},{"word":"physics-","score":5},{"word":"physical","score":5},{"word":"behaviour","score":5},{"word":"collinsdictionary","score":5},{"word":"english","score":5},{"word":"time","score":35},{"word":"distance","score":35},{"word":"wheels","score":5},{"word":"revelations","score":5},{"word":"minute","score":5},{"word":"acceleration","score":20},{"word":"torque","score":5},{"word":"wheel","score":5},{"word":"rotations","score":5},{"word":"resistance","score":5},{"word":"momentum","score":5},{"word":"measure","score":10},{"word":"direction","score":10},{"word":"car","score":5},{"word":"add","score":5},{"word":"traveled","score":5},{"word":"weight","score":5},{"word":"electrical","score":5},{"word":"power","score":5}];

</script>

<div style="width: 40%;">
    <div class="legend">
        Commonly used words are larger and slightly faded in color.  Less common words are smaller and darker.
    </div>

</div>


</html>